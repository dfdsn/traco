<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Usuários</title>
</h:head>
<h:body>
<p:growl id="mensagem" />


	<h:form>
		<p:panel header="Usuários - Listagem">
				<p:dataTable id="dtbUsu" emptyMessage="Nenhum registro encontrado"
			value="#{usuarioBean.usuarios}" var="usu" rows="10" paginator="true"
			paginatorPosition="top"
			paginatorTemplate="{CurrentPageReport}  {PreviousPageLink} {PageLinks} {NextPageLink}  {RowsPerPageDropdown}"
			rowsPerPageTemplate="5,10,15,20,30,50"
			draggableColumns="true" draggableRows="true">
				<f:facet name="header">
					<p:commandButton value="Novo" oncomplete="PF('dialogo').show();" />
				</f:facet>

				<p:column headerText="Id" sortBy="#{usu.id}" filterBy="#{usu.id}"
				filterStyle="display:none; visibility:hidden;" style="width:6%">
				<h:outputText value="#{usu.id}" />
			</p:column>

			<p:column headerText="Nome" sortBy="#{usu.nome}" filterBy="#{usu.nome}"
				filterStyle="display:none; visibility:hidden;" style="width:25%">
				<h:outputText value="#{usu.nome}" />
			</p:column>


			<p:column headerText="Idade" sortBy="#{usu.idade}" filterBy="#{usu.idade}"
				filterStyle="display:none; visibility:hidden;" style="width:6%">
				<h:outputText value="#{usu.idade}" />
			</p:column>



	<p:column headerText="Email" sortBy="#{usu.email}" filterBy="#{usu.email}"
			  filterStyle="display:none; visibility:hidden;" style="width:23%">
				<h:outputText value="#{usu.email}" />
			</p:column>

			


			<p:column headerText="Empresa" sortBy="#{usu.empresa}" filterBy="#{usu.empresa}"
				filterStyle="display:none; visibility:hidden;" style="width:16%">
				<h:outputText value="#{usu.empresa}" />
			</p:column>

			<p:column headerText="Função" sortBy="#{usu.funcao}" filterBy="#{usu.funcao}"
				filterStyle="display:none; visibility:hidden;" style="width:16%">
				<h:outputText value="#{usu.funcao}" />
			</p:column>
			
			<p:column headerText="Opções" style="width:8%">
				<p:commandButton icon="ui-icon-closethick" style="width:30px" actionListener="#{usuarioBean.excluir}" update=":mensagem :cadastro:painel">
					<f:attribute name="usuSelecionado" value="#{usu}"/>				
				</p:commandButton>
				
				
				<p:commandButton icon="ui-icon-pencil" style="width:30px" oncomplete="PF('dialogo').show();" actionListener="#{usuarioBean.editar}"   update=":mensagem">
				<f:attribute name="usuSelecionado" value="#{usu}"/>
				</p:commandButton>
			</p:column>
				
				
				
				
				
			</p:dataTable>
		</p:panel>
	</h:form>

	<p:dialog header="Usuários - Cadastro" widgetVar="dialogo"
		draggable="false" resizable="false" modal="true" closable="false">
		<h:form id="cadastro">
			<h:panelGrid columns="2" id="painel">


				
				<p:outputLabel value="Nome:" />
					<p:inputText value="#{usuarioBean.usuario.nome}" />

					<p:outputLabel value="Idade:" />
					<p:inputText value="#{usuarioBean.usuario.idade}" />
					
										<p:outputLabel value="Email:" />
					<p:inputText value="#{usuarioBean.usuario.email}" />

					<p:outputLabel value="Empresa:" />
					<p:inputText value="#{usuarioBean.usuario.empresa}" />

					<p:outputLabel value="Função:" />
					<p:inputText value="#{usuarioBean.usuario.funcao}"></p:inputText>

					<p:outputLabel value="Password:" />
					<p:inputText value="#{usuarioBean.usuario.pass}"></p:inputText>
				
	
			</h:panelGrid>

			<h:panelGrid columns="2">
				<p:commandButton value="Salvar" actionListener="#{usuarioBean.salvar}"/>
				<p:commandButton value="Fechar" oncomplete="PF('dialogo').hide();" />
			</h:panelGrid>
		</h:form>
	</p:dialog>
</h:body>
</html>